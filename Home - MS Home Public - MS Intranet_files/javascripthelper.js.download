webpackJsonp([0],{8:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),i=t(2),s=function(e){return e&&e.__esModule?e:{default:e}}(i),r=void 0,l=void 0,u=void 0,d=void 0,c=void 0,m=void 0;window.magna=window.magna||{},window.magna.const=new(function(){function e(){o(this,e)}return a(e,[{key:"setConst",value:function(e,n,t,o,a,i,s){r=e,l=t,u=o,d=a,c=i,m=s}}]),e}()),window.magna.language=new(function(){function e(){o(this,e)}return a(e,[{key:"init",value:function(e){var n=this;if("notDefined"===e||""===e)console.log("No activeRedDotUrl defined");else{var t=e.replace("getMenuXmlPortal","getLanguagesXmlPortal");t=t.replace("http://cms.intranet.magnasteyr.com",""),s.default.get(t).then(function(e){n.myResponse(e)})}}},{key:"myResponse",value:function(e){var n=e.data;n.indexOf('portalLangCode="de"')>0?$("#lang-switcher-de").parent().show():$("#lang-switcher-de").parent().remove(),n.indexOf('portalLangCode="en"')>0?$("#lang-switcher-en").parent().show():$("#lang-switcher-en").parent().remove(),n.indexOf('portalLangCode="zh"')>0?$("#lang-switcher-zh").parent().show():$("#lang-switcher-zh").parent().remove(),n.indexOf('portalLangCode="ja"')>0?$("#lang-switcher-ja").parent().show():$("#lang-switcher-ja").parent().remove()}},{key:"switch",value:function(e,n){window.location.href="/c/portal/update_language?p_l_id="+n+"&languageId="+e+"&redirect="+encodeURI(window.location.href)}}]),e}()),window.magna.navigation=new(function(){function e(){o(this,e)}return a(e,[{key:"doHeadNavigationAssignment",value:function(e,n,t,o){var a=this;(0,s.default)({method:"post",url:e,data:{urls:n,languageId:t}}).then(function(e){a.myResponse(e,o)})}},{key:"myResponse",value:function(e,n){var t=document.getElementById("navMenu");this.assignSubMenusToHead(e.data,t,n)}},{key:"assignSubMenusToHead",value:function(e,n,t){if(void 0!==e.items){if(e.items[0].url=t,n)for(;n.firstChild;)n.removeChild(n.firstChild);for(var o=void 0,a=!1,i=!1,s=e.items.length,r=0;r<s;r++){var l=e.items[r],u=l.title,d=l.url,c=this.getListItemWithLink(u,d,!1);if(c.className="has-submenu",window.location.href.indexOf(d)>-1&&(c.className="active has-submenu",i=!0),a||(a=!0,o=c),void 0!==l.items){var m=document.createElement("ul");this.assignSubMenusToHeadRec(l,m),c.appendChild(m)}n.appendChild(c)}!i&&a&&(o.className="active has-submenu")}}},{key:"assignSubMenusToHeadRec",value:function(e,n){if(void 0!==e.items){n.setAttribute("class","submenu");for(var t=e.items.length,o=0;o<t;o++){var a=e.items[o],i=a.title,s=a.url,r=this.getListItemWithLink(i,s,!0),l=0==o&&1==t,u=0==o,d=o==t-1;if(l?r.setAttribute("class","firstAndLast"):u?r.setAttribute("class","first"):d&&r.setAttribute("class","last"),void 0!==a.items&&a.items.length>0){var c=document.createElement("ul");this.assignSubMenusToHeadRec(a,c),r.appendChild(c),r.classList.add("has-submenu")}n.appendChild(r)}}}},{key:"getListItemWithLink",value:function(e,n,t){var o=document.createElement("li"),a=document.createElement("a");return a.setAttribute("href",n),"Magnet"===e&&a.setAttribute("target","_blank"),a.text=unescape(e),o.appendChild(a),o}}]),e}()),window.magna.footer=new(function(){function e(){o(this,e)}return a(e,[{key:"doLogin",value:function(){if($("#IDToken2").val().length<6)return!1;document.getElementById("btnLogin").disabled=!0;var e={userName:$("#IDToken1").val(),password:$("#IDToken2").val()};document.cookie="AMAuthCookie=;path=/;domain=.magnasteyr.com;expires=Thu, 01-Jan-1970 00:00:01 GMT",(0,s.default)({method:"post",url:"/accessmanager-access/login",data:e}).then(function(e){window.location.href="/html/common/redirect.jsp",document.getElementById("btnLogin").disabled=!1}).catch(function(e){!e.response||403!==e.response.status||"PASSWORD_CHANGE_REQUIRED"!==e.response.data.status&&"USER_MUST_RESET_PASSWORD"!==e.response.data.status?!e.response||"ACCOUNT_DISABLED"!==e.response.data.status&&"ACCOUNT_EXPIRED"!==e.response.data.status&&"USER_ACCOUNT_LOCKED"!==e.response.data.status?(console.log(e),window.magna.footer.displayOTPMessage("Login failed"),document.getElementById("btnLogin").disabled=!1):(window.magna.footer.displayOTPMessage("Account is inactive/locked! Please contact the MS Hotline: hotline1008.magnasteyr@magna.com"),document.getElementById("btnLogin").disabled=!1):(window.magna.footer.displayOTPMessage("Your password has to be changed! Please contact the MS Hotline: hotline1008.magnasteyr@magna.com"),document.getElementById("btnLogin").disabled=!1)})}},{key:"displayOTPMessage",value:function(e){$("#loginMessageBlock").text(e),$("#loginMessageBlock").fadeIn(500,function(){$(this).css("display","block")}),setTimeout(function(){$("#loginMessageBlock").fadeOut(1e3,function(){$(this).css("display","none")})},6e3)}},{key:"logout",value:function(){(0,s.default)({method:"post",url:"/accessmanager-access/logout",data:""}).then(function(e){window.location.href="/"}).catch(function(e){console.log(e),window.magna.footer.displayOTPMessage(e)})}},{key:"myResponse",value:function(e,n){var t=document.getElementById("navMenu");this.assignSubMenusToHead(e.data,t,n)}},{key:"setFormActions",value:function(){var e=window.magna.isExternal?c:d,n=window.location.href;if(document.forms.loginForm){var t=e+"/UI/Login",o="?goto="+n+"%3Flogin=true";window.magna.isExternal&&(o="?goto="+e+"/redirector.jsp%3Flogin=true"),window.magna.isExternal&&(document.getElementById("realm").value="ms_external");var a=t+o;document.forms.loginForm.action=a}else{var t=e+"/UI/Logout?goto="+this.getFullHostUpToPath()+"/c/portal/logout";console.log(t),document.forms.logoutForm&&(document.forms.logoutForm.action=a)}}},{key:"getFullHostUpToPath",value:function(){var e=window.location.host,n=window.location.href.indexOf(e)+e.length;return window.location.href.substring(0,n)}},{key:"doPhoneOrNameSearch",value:function(){var e=document.getElementById("phoneNumberName").value,n=m+encodeURIComponent(e);return location.hash=n,!1}},{key:"doPhoneOrNameSearchKeyPress",value:function(e){if(13==(e.keyCode?e.keyCode:e.which)){var n=document.getElementById("phoneNumberName").value,t=m+encodeURIComponent(n);return location.hash=t,!1}}}]),e}())}},[8]);
//# sourceMappingURL=javascripthelper.js.map